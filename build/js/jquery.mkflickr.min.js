/*! jquery.mkflickr 2013-06-09 */
!function(a){function b(b,e){this.element=b,this.settings=a.extend({},d,e),this._defaults=d,this._name=c,this.init()}var c="mkflickr",d={apiKey:"",userId:"",containerCssClass:"flickr-region",itemCount:20,baseUrl:"http://api.flickr.com/services/rest/?method=",tag:"span"};b.prototype={init:function(){return a(this.element).html('<div class="'+this.settings.containerCssClass+'"></div>'),this.doAjax(),this},galleryError:function(b){a(this.element).html("<"+this.settings.tag+' class="flickr-error">Error: '+b.message+". Check your API key and userID</"+this.settings.tag+">")},buildGallery:function(b){var c=b.photos.photo,d=this.settings.tag,e=this;a.map(c,function(b){var c="http://farm"+b.farm+".staticflickr.com/"+b.server+"/"+b.id+"_"+b.secret+"_t.jpg",f="http://farm"+b.farm+".staticflickr.com/"+b.server+"/"+b.id+"_"+b.secret+"_z.jpg";a(e.element).find("div."+e.settings.containerCssClass).append("<"+d+'><a href="'+f+'"><img src="'+c+'"/></a></'+d+">")})},doAjax:function(){var b=this;a.ajax({url:this.buildFlickrUrl(),dataType:"jsonp",success:function(a){"ok"===a.stat?b.buildGallery(a):b.galleryError(a)}})},buildFlickrUrl:function(){var a=this.settings,b=a.baseUrl+"flickr.photos.search&api_key="+a.apiKey+"&user_id="+a.userId+"&per_page="+a.itemCount+"&format=json&jsoncallback=?";return b}},a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))})}}(jQuery,window,document);